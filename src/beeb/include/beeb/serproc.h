#ifndef HEADER_E81A9A399B9F4CEC9C472D77C905F64C // -*- mode:c++ -*-
#define HEADER_E81A9A399B9F4CEC9C472D77C905F64C

//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////

#include <shared/enum_decl.h>
#include "serproc.inl"
#include <shared/enum_end.h>

union M6502Word;

//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////

struct SERPROC {
    struct ControlRegisterBits {
        SERPROCBaudRate tx_baud : 3;
        SERPROCBaudRate rx_baud : 3;
        uint8_t rs423 : 1;
        uint8_t motor : 1;
    };

    union ControlRegister {
        ControlRegisterBits bits;
        uint8_t value;
    };
    CHECK_SIZEOF(ControlRegister, 1);

    ControlRegister control = {};
};

//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////

void WriteSERPROC(void *serproc, M6502Word addr, uint8_t value);

//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////

#endif
